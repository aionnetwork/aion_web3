let test_cfg = require('./_integ_test_config.js');

//console.log("Using cfg = ", test_cfg);

let should = require('should')
let Web3 = require('../')
let client = new Web3(new Web3.providers.HttpProvider(test_cfg.JAVA_IP));

let data = "0x00002070504b0304140008080800d4ad282b000000000000000000000000140004004d4554412d494e462f4d414e49464553542e4d46feca0000f34dcccb4c4b2d2ed10d4b2d2acecccfb35230d433e0e5f24dccccd375ce492c2eb65270e4e5e2e50200504b07082bc2bf352a00000028000000504b0304140008080800d4ad282b00000000000000000000000007000000412e636c6173738d58097854d5153ef7ce4a78c06481b08b4a3180b2c9a6206423921008610238c485c964c8369909331320b8ef6bdd17b46aadbb551499169f8adaba54abd5d6d66ab5b5ad5aabd55ab42d55db6a7bfe7bdf9d4c98d0af43debbf7fde73f7739e72ee7f0e2d78f3d4944f3654690a8f0911014e80c6f09cf8c85e36d331b5a3aa391b48f5c82862d8fc662898a2ddd332066323f45f5fdd4603ad9116f5bc482167e6af989f0d3ca4f153f517e36f0b3899f4a7edaf8a9e1a79d9f6a7e3af8a9e3a7939f203f5ddc617d784bf7cc8ad6d664349542bb3141c5cd83f6d82d4836a3b9382ae83b21c8d5ac6a3daa86316c5635f49254358c23a56ae8310d55d07a51016b0b2a206d45059c6d8246e9017487d3ed332b3bda6ae3e9685b348941f4092a6d3ea8743bb7110ee3d5825704af56bca2687c036a9bf06ac3ab1d58356a1d7875e2c51629691e74fa321cc30b4608c7d57c547309bcf4ec6b50d5d357ad26f1c2d4cba6ae13341c76ae8c25225d91f67047dc476b0415b645d30a6aeae88ea6d2e1ee1ec5aeb3a889d6165090d60d58277a2c3e3a41906f4b38d61b6de0c98c2cab9b9a3f5e8b3650730185e84436661d4bab12f174321c4957477b6289beee683ceda79305f93182be749487e92e9bda5c69d1460a43afc5a2313476084962fb0dcd59233ee24e87a613d0aa4826c37d16b543a58dd88aae58824d3ba4acb912ffa6aeb3a88b6298089b6d442a1a6f6d4a86e3291e464722ee27b65d49d9a083f7920f5db3058bab7a93491eeda494924dea484d127ee26534b95fad23be25d11575b479a29170ba86fb4824fb7cc4cbabb43bdc15d5f0fa8e743bd7d8d4f1344f7947597d5e2b2ba3e9f644ebf270bc35164d4dae4f24ba7a7b16e58ff1608a4d7d3dd141e8b94b4a6ff74553f39ba80ac762c18e74942db08dfa0a682b6d1fe1a553054d29cb6f7250c36da3d38bf8a0398357480f43e9581c2b64106576cd5974365c730ebb665574eb40039f574402adb8cb9417475000feb8c8223f351670ed12883640348c8643f44d005500869205e04a004100a5341ac035006a01f8690880eb01d40028a422003702a80330924601b819403580622a01f06d1e2baf98814716ef984af5dea0de55ea1d54ef5af5ae516fde93a3cd6a3bf0e8b0e8689a8b0ebe6bd1129a85da037a476cb068311d07e0210d5459b4888e04b05b03418baa680e80ef6ba0d6a2636912005b0335162da589001ed7006ff04a9a01e0490d545b544e15007e087f4d1de404b2e8181a0fc6b3823cccc05eada33220cf3b088f7539d50279d14178b0c7d364202f3b088f76354d03f23307e1e1d6d061407ee1203cde15540fe47507e10137d014206f3a088f7825ad02f21b20b5b5b0f598ecc8f30dbc90e683fd7bb006e7c0cf0bb41bdec3d1c99bbc6430a28ffec807d7ec5973e7cd5fb070819f3e14e45ddc11ef482fb1e823ace90fe863e8f75a54a057da5ff0898b268c4b26cc17ccd8b2830c1447b5bb5b1dd001de447c3c5687d3618bfe81332e489f63b2fa64fb88be2ca0fdf44fb4c887e0bf69333ebfe2c1b0123bcd4fffe17a74736f38963a60139a1360832584907cdc0a17c6ca0d48e1f191c54d46f8c61a35d8c665bf0bbf1852207ca2808f5add174bfcc2c2de536d0c6741aa5fc013912d1d9628524314c5d8b4678337926798d217805f948215b6c418ba1dacb1d8f51782355e50015889442c1a8efbc544105b2c3189ee00f150ecdfcb403c5c3757d51e4efac537c08a58e208ba13ac32ece12bc09ac6cec3e0da13c9b45f1c095aab2566d05da0cdc4debf1ab4d96c3ca6b15ffce26890a29698477783341f67ca75202dd46dd5c41261a61d0b5a9b2516d33da01d872b6c07684bf5c0ea13b04605589b2c51852b76bfe0853c8ebe05568db65a75a2b725c6f6580e5ebb25eae85ef0565834816e056f25af01367b45c42f1a2c3a84be03b0113ee39bb1b06cc0e9a4dc15144d70d75abd9eb4b5d75b74280c2d4508fd24b0ae2a15bb599c08f6496cf5b61cab9f62d1e130b84448285b7aa0b0412944442b14a2ba796dfd368bbe01c34bc47cb26533d8558add25626077ebbbdff142c2a223e00089f04db624410f2a7a4aa441efd5cb5a7963ab4553e10889604cb6a4d4fe57e453c569209faedb76bc72a645d3e11029ce06bd17f41a453f579c07faf97ae0da3b175a74141c23c5c560a7c1ae53ec4bc565607f532f7ae3a52b2c9a0907497115f85bc0af56fc6bc4b5e05fc7312eec98dde27e718345b3e93ee8dc08afb5e13838c8698086be256e4643b7380ed1718f5f7c1b974618ad7c073df3c9e2c5c9008d3bc49dd0b8cbe95abb5029dd63d13c7a104af741699b52d26ebc5f3c00a59dba1bb851693c8443f161683c0c8d3ea5a15d9911df83065f3b438d2b95ca23386dbf079547a1b25da968773e2ef642e5096d449ea652780a97cb2350f8210c12560adaa5cf8867a1f09cee43b954a93c8f4bee31a8fc182a11a5a2ddfa92f809545ed613815b95c64f71713e018d57a1d1a234b46b7f215e83c62f055959d72a9d3770fbfe003a6f42a755e968f7fe5afc063a6f67cf40a5f03bdcdfcf40e11d28f02e292d1be432552dbc27fe8016ded7bdcea9ce7af603dcd73f42237f42239c27f8ca9a1dd77e2cfe0ca54f3810d14a39cedd875bfcc7d0fb0c7a1d5a4f7bf76fe2efd0db6f3acbfaf773c4023f81d29750ead44adac1ff12ff86d2577a1dcda9ee77f17f1074fc94b5a4805697d6523e962ee9662de9d12e9b53ed7859fa2caaa69f43670874625a47b9590e95167486999eb28e9623101efc125a85d0ead65acad3b25896406ba49994f1b52c45dcf12b288d81525c2b2967cb71723c9426704aa494fadd2d0f4100f36ba81d0ab5845653fe9687cbc950e36ba588d596b5b6459775f7a4fbcce48e403484252ca7eabc0a8c55bdb198214c4750a30847e9850942b0b7db2f672294f92d24b3f54456f655d6aad4c62f8f46e0f33bc8e661447c3a8e3b68e480512e900b31ca63f4858386fc12c9634ba7258fc399b35f2e4104f62e9a2cd7079f667138f7be3a942407aa81d668241945965695e8e5f679fc1c947da22e3dc91753a0237ea09c43b44fb5bc5e1fbf4ae297ab2cfa4c9dd67235cf2e3560766b30b22e4b36618afbe55a8bfe4a7f03753d6fb464744b3499b66408117f507270ed5f1c89a9388b177fba9d1305fe0b4fe2e4317da85f9ea43722529868d292a7e05a0cca8dc8e5903148deef1ef59f1b7ec9dbd8b33e918cb5fae526dcbe086b653bee5704c9b213972ae26719f3d124dc93884e65c24747e20e44382b39089ce121fd1b612a05b8f410a54a4efc66e14a43782c4ff3d11c5c59887aa5ba8d10becbb371d3200897e7e20e41d02fcfc7cd80585e5e2868c24227c49c7f3497f316cc5fa8fe6633326bd62cbfe40b6ac2ecff4db99483c926b6945f223f82b9fcf20a04363a329357b9cb17bef6b57be9cd9d67bacb23e71fe25dfac57bc1cf5f79b3d45beedefcec9c17d7dfeb2df7d3d8f9ef7e3c5e4d72c2cb51d2b3dd71fd59aae2bae642f2d1713e9ae8aef872a2ed2e5fbeff191f5578cb4f7e7de89aaa1b33def28f1ebcb778fada7d9a3debdd3e5591e3b6decd23aa4ab472d8302c980e47ba56867b9ac2bc1379770413bdc948b4a6031f013ee1d23cde708f4e7053ec0f496e6ee3280e59395187e191d2a9b2c029390954256787aae40452959ce9a992f3395572a2a74ace11553986c6aa9217852a7949a89217842a792da89297812ad9dfaa6457ab92bdac4af6b12ad9c3aa64ffaa92bdab4a4ef754398fe6ab7281f3bdd0f93ec6e9ff58a7df454e7b9c0baa7289d3de52677c9cbda9b2d2e9afcae9a79a96a9b2c619f7f1ceb8394f53659d336eceb754c939952a1b9c79ad56f399ab2cdd48423ec45f65e4620f108db769bd4d27ad283aa57efa1e8aeca6e81eea9cc6359be20fab453204e9fac1b47a0eaec5a988a3358e84de63bb29f5189d4964d3b95cdde51087febf444e381ce27826821a9896a194225fa0c8a66f4e3a1c6689c3f48fcdd0c5365d6a189c6d0cc2b83c87c199c6208cab72189c640cc2b83687c119c6208c1b72189c5c1cc8382c4337e53038b1c832a4b2be7f62866ec961704a7120634a866ecb61707ee130028e89ddec336357ce21f2a5173fe0483961c8975e6ea49c20e44baf3252ce07f2a5d71a292700f9d21b8c94e3fd7ce94d0f3a528eefb35269a4b7ec74a41ccde74b6f7bc89172dc9edff2fdc61a1c8fe74b771a2907def9d25d46ca4176be3463a41c4fe74bf7182907cff9d2478d94e3e47ce95e23e598385ffa949172f49b2f7dda4839d4cd973e67a41cc3e64b5f30528e54f3a52f192987a4f9d2578c9443cf7ce9ab46ca4166bef43523e560325ffa869172d4982f7dcb483938cc97be6da475592f1439fbd1ebda5bb0629a91af18e025c8dda25fca2160cebac3ca738f1db7d1ac680e02f37b7ec7e8723ce7480b9d963d7cbafdc16ce1f7b38b76141fc2f8153c4e1f848afef408fdd934f149f6b819c99da38921bb69dfd8d60ced33cd7c3a3865630ee5b3c1b6e53e33090eee0619e63b46f9ef66f7b85d1c64b0055c7b1ea7fd219bbe7884feb582af88afeba73f4f3ed75effaee9c582f608f78d54600baf2d8602186680110e50a880c269a13da2e494f5b618e5688eeec7c7019fe0e087f4e387019fece053faf1a9c0a73bf851fdf82ce0731c7c6e3fbe00f8310ebea81f5f02bcdcc12b155e047cd94927b0e0784750db2fa85782558e60b599ea1a5bac0370820136d8e264001b0dd0628b4d00da0dd0698b38801e03246db105c036036cb7c51900ce32c039b6b800c04506b8c4169703b8d20057dbe27a003b0c70932d6e05709b016eb7c5dd00ee35c0776df120805d06d86d8b3d006c033c668b2701fcc0004fdbe247005e30c08bb67805c0cf0cf0735bbc0ee0570678cb16bf05f07b03bc6b8b3f02f8d0001fd9e22f003e35c05f6df10f005f18e09fb6f89a0169569c94b6f402f01b80ff86030818a0c896a3008c36c0585b4e0430c90087d9720a8032034cd39393471a608603cc52c028bd9c9c3525e7681fc9b9863ddf96c702589c5d64722988157ac9c82a435ca63d238f1fb84a65ad435c7100bed2c11b4c038d4ed7c1fe9ed681780288b66c16385284c47b11cdfe8a46fb68bf8f428140a9fe8d1e1df85fbff1815266064ac92f4f34c1a3eb120e24f9e73aa3589ecc619b8b8f1c5b863314b565c4f3048542ae62190d86dcc5b22d98911d9ebdde90cb6a0cb98735666497676f41c8e56e08b93d0d19d9ed7942c643ae1c8cd5d49797bf7c0dacdec394cda07842ae40786dc81d6859ab48b9df1999625a1ab4a1215789ec5d1d7297c8adab1571209291db997a2aa8fe90cbdfc40d2c6d52bc9ccf8c3c9d4967803484bb2958c7f088758a95fb9d91670d1847469e73407719795e6ec31979c1801632f2a2ecd9cf57041bef83900b48b1bc8421ee507f5c860f3e9cbd8e752f57d6bd3218f214cbab59f09c1736f3b0cdd86e1e7f43861ef5e60e2ce40944d66628e3ddeb6643f3585c4d218fbb2943bbbc185d600486379db1c04206777ae1b162794d237ab9b611bd5cd798a1bddebd3e4ceefa3598dc8e35214f89bc694d869ef6ea49dfac267deb6ae0b7adced0535e35d7493cd742fa705dc85338eaf07519da93e3f4c0a93ce6425191f57b3f90a1d7725d5f819954f6bbde7c67e815a6dd0e5a766e8ad4ff95a197725c1eb80893dd96f579f63b432f30ed0ed0d4f4ef54d3bfab51110722197a83a97783aa2c728fb2c87d6b14752092a1b7072ccdfb959176e62ccd2c92a1b772565de1e904c3f1dbacbb1c2443afea8b5a4a94923c723797c3b9761adfe5bdea7dfe7f01504b0708e692a3cf7e10000069220000504b0304140008080800d4ad282b00000000000000000000000007000000422e636c6173739d565d731365147e36d9cda66181ad96d236a950ab34495b5aa805a11f94b41453431102d550abdda4214d090993a6d57ae128237f40669ce10ac6d1e98c032a33401951f4da7b7f80b7de79eb74ace76cde269b4fab9d74f7bce73de779cef37eedfbebdf3f3c07700c4b12a4800a4982be64ac1a7d29239de83b1f5d8ac7722aec12f69e0e0427e2b1cc423c7b980324d88c1ce504ed94bec5ad15b69c6cadd26336c0d607121cc3c97432372a41f1ce067c3312ec5edf8c863dd05d90d1a86117b406d8f0a286dd50d9dac7996b129abcbe50b196702e9b4c2786a82f9ad4d08a161785b695949b0f51e1a1bab2265198ac65d30a92b5625a530cff9104d91b34bd132a0eb9d0c5a5bc84038cea6312c30c6615d194865e2ed786c3dc8c9a3d57d88c99e6389b0bfc886b38880e8e3cc6cdab1a5e4627374f703361464fd260166b9e4c650c1ae111097b92e95c20995bbe94317df90227359cc2980ba338cd088b26c24489ea89cc4a3415577186bca94c3a91c7c87b1964ca37a1e12cde7061124106b9aee1cdbc9c50e9f0ad2de7e2d7554c4b6830b259632d96b941d3e0f786ca57c450b08a2bc8d3fa162eb8701e177982f7bad08e4bcc488bab657b32af1bb9c5be4032114ce7e289789626b4a99a5fc53b2e44f2e9d724b47a7db3b5f26dd1b486b9bca2f734bc8257d99a97b0bf468a8aa88619bccd61346dbbc733e9e59c91cecd18a9151eb2715ae5e40ee78cd8b573c68d4b863992ae7066251b8b4f2653717450a64ccb5d461b1ca06d83abd4b2c149ed064b9b19687d9b36ad6e7a37511f0d0d3d13d47293df46efbdfe0dbce0ef7e8c26bffd319a1f82ff48005a44e00911d82ef91fa1e96b68767e3fbf471b2eb40ea7ff09dca1eeefcda4457aba606f943721ab3403365ed60518d984e9e56cfa6f1ed09d1fde1e766f37e5f981466c7dfcc9ed617f849aca3c15e3be6f5663e3952d600c0173d90a538952e254aa391dc299a7534be868e708ba5fa0800f974756ba5b6307caf86e7daa3bd78a5ea5aad751d5ab56f53aab7af5ea107a0163cc14a33b59cd8107420dad4aa1669ab4b09a417306397541f912bb9ea12bb201efcfb412fc23c52e8f7bd1d2e9b95f986215b6e64df3a843377a04f61c8d9444efb384d257039febe502afc85ce0807cb7765f918de6bbcd4d763f8e08aa4541757ee7544a1daa3b50e575c876ab40b9cddd3cc6028f6240b05e14acc3a5ac8e3aac8ebba583fb79a5aad70a1be482c01fda39be5a865f093f58d83835e09d75e09da5f0c72be15f2f6c94b0801f2985d71beae0eb65e373f28195c0ed217b08c382e0b22038b5f3faf5b2f139fe14816f4b3430c5382604c58ca018fb2f1aca06e9e4534c7d5721a3b5709afe461c7c7c7f63726ce09c142a1e2d47efe1a0e564d13bee412f9e86eb58ad60ef285bd7ffbea9ad5bfa47e7f4365dafddf3146113dbc3d0cfd01ee9ddc065ebd1de0a6513838a67df26dd7eb6e85cb1a9fc6b3703e8a32624fe2e243ed989c4ce3289372b2476569528d79993ff2537c272afd4907bc822376206cce25d21f70f21f72b21f7fd32b9fd56b9472cf215ab7c475efe7c857cca68a93f26ca068c11cf4f8884eca3ed2458ef6ea78f723cfc995d5adffa731ddaf47628899370135fe00e5d3af3227ba06ee28ce253b7e8ae209b0263741347e3167d39eca20d4945d75f74c5b0f16d54e8eea716ef96b6f27b41a1b287d67dd048587cf913d93d227b7ff5555b4cb5436aa6d8b97a998eda991292e64750f907504b07089015bd90fb0400006f0c0000504b0304140008080800d4ad282b00000000000000000000000007000000432e636c6173739598dd731b6715c69f95565a5951e3f587243796dd28865496e4287113a5903ac5b2eb22c74e4b2502b121589615db892db9b29cc6296d02754ba02990968f16683b300cbee5066a2088192eb9e58a19ee1866f817982915e7ecbeeb5d69ad484d66ec3def9ef79cdf73cefbb1e3bf7df2c72a80243e94204d289024a8d772377289b55c7139f1dce2b542bea2c029a1733c957ea6982f2d15ca27d84182237793e6a49d34bd46d66249822b921a9e4fb1b1c1c69c6ecca7143cc2832ff2e084f028b39111c6261b696154d89826c305fd9f167e8b47a734974e93706aad9423c07e0987aff263b6942e5652ab150a289377da87010c7a11c2631ce306c798d46258544e96b616d70a0a866874497bce96664ac56523cce4f0b40f9fc5712f3e83c739cc4b12dc91795daa34a92046f653abc5d5ca7909cec8f0251f4670c28b3812757932db9b95c2ba8253123a72e5726e3b5fdad896108dcc3456fc5cfa80a134077e02a7bd18c519c6b8a96118459e53f0391eddd6468d2adfd22c51e67c4eb3449df38b9a352dacbc664d096b49b32685559010b052662ae5d5e2f2b9c642eac30ad2123ccb854a6abb52d00a487e3e5cc08c17d398e57857257445667237d613e34b4be5c2e6a61eea906544c19768a052e220e35c2c1f321ce1056439c2b2842382683d575949a45697a9f185e542590fd57bd02b055ff5e2b21e6045821299174d74cef31afdba0fc3887ae1c037d8831668077ba4531a7f0e8bfc2acfaf56f5c973c664aafdb20f67f1247bacb2c735dd63c2f0a0adb5eec3393cc51e25f6b8ae7b640c8f8c824d1fc6709e3db6d8634df7481b1e69055485a7f105f678993dd6758f29c3634ac16d1f2630c91edf628fa2ee316d784c2b78dd8771a4d8e33bec51d23d260d0f5acf6ffaf00ca6d8e32df6a0bd1c8ccc37697fcf012f14dcf7e1597c9123bcc31168e3f71b110e6c57b0c94b053ff5e112bec291de93f0c844a9b859c9152b97726b5bb428e5093a8f683853c9e5afcfe636b239dabc12bc99d256395f985a5d2be014cd94e90ca1f50237e880c3cfc972c0834174d07f2f8dfc82468ec049a3c061d703cf4ccc296763f2916cecb7daf9d38143f009bf69e117d4fd5cecf71e147917b2f3be3e41c2fbf4330c470ddd70480a0ec3413fa41a27d64c279bb4bcd00955c48d1125c77dccadc575735cd573ab0bb55729aceb88783080ba28f481139516137bd02b264e8889673dda448f36b1cf9ca8aac6b3db1250690ce8474004bc4305e6dba0a2763cf0ccc69daa3b1b9707d5275fee45f0f6ddfbd9b86b503db96fb807d5c8bea10caa47f70dcfa0dab76fa8e4a79a16397a4ccb33683c1a348f5223759a34c9639a3196776c0f47c7624e95ab13b2880c5944862c22430d22c33826c2be4e22f95edad6441edf4324454a3da4346c551ab62a0d5b9586ad4ac3754ac3754ac3754ac38d4ae9a812486502e2465e92a2bf41afbe2ed55152aa766577311ead76ddaefd1a87fe84f8e58f70f22fd1aa6b415ed0bdbac82b5ab52c1772d69ea2ce983b5add43d2b2a2bd70063a3fc608afe00e3eed44fe8fa8d2bcc54ab6fcdd947fee61f9bb9be5778eb9cf87a2d55fa13f36100d3d61eeb01d87b4e394766bffb68025e10e747e8288b6ab6ab43764059fd7b7d8fec63387f4cdf75f92d3c107b210f18110f18a4d440f89583940c48a29a3a7a58cc759c669d363405e205b3734498eddda3f2c923a21b3a4a8601d2656ba1a5ab2f6b666ed6d8ff54c03eb994fc54a979460ad0ad6f76dac7e62bd6b67552cacfe96accf32eb0973476bac27cc5d3de0d26c538b9b6d8b1679b7f687e65ad2a4852e4b5d8bd4417b9fb5fcc7a625405afe6ed7a27a2c62022dc5dc673109f318d1d524cca3449793308f135d4fc23c5262038a36d0670e78b401d51c50f5391ecb883649985a593cbbb592bd2c31519677a82cf495215afc572a0a1f89bfb495254865b9f7f016075b56e5423474928eefa41c1bf0cb759d26d3da6832ad7df6cbf56dfe5df336cf921efae2b1b4d97d609bfbda68735feb364743a7e8de384b8202727db7c9ae6b36d975bd26bbaed564d7759aecfa46d3407d9f03f2a76b337dc689365fa526f3857ac1569630952519fd3d2ecec62d677b985ec5ad85888b42c4e96e8937dc2d1d70043ec6a87eb53c87e745ce1591f3695bce6394334a39bf3cab1e8d573f34dba18675af639c476ecc13a43bec7ff4114489b4af33052f704e06a0cf4ccb85cafb3c6dcb3a44594f53d63952aa1eb52c8278f53cb5cf903e44be039a50d7c043f28738ff6523ff3cbe26f2bf2636d4f39cff51b725ff292aa376ab2795b168f5cf387cd19994fd32afaad008fdf6cba37b58c8f0f36875616c47a69bf25f2321b56b0f4b33751fa7727f8d6e4097822ba04fd22b127d40d6888a80ae1840056a795b40dd2d80aed981ba9b03ad3402ad1840d7b1d61e504f0ba00d3b504f73a0622350d1007a91964a5b40bd2d806ed8817a9b03551a812a06d04bb8d91e90bf05d037ed40fee640b71a816e1940afe0d5f680822d80be6d070a3607bad30874c7007a0d3bed01055a00ddb503059a03bdd108f48601f45d7caf3da0be1640dfb703f53507bad70874cf00fa017ed81e50b805d08fec40e1e6406f3702bd6d00fd183f690f68a805d0cfec4043cd81de6d047a5707f2f29f8204d086f854c8f43ff05c1c7112c6881cca8eb82c1f00236ee3034049cacea4cbef62a8a1a8df35ead4c85ca37c4789a785a4bce322b67f8e984c87e0303e558ed3d007e0bf5fb8fe0f504b070859f4f052d2070000ba150000504b0304140008080800d4ad282b00000000000000000000000007000000442e636c6173733d4ebb0ac240109ccd4b89899ad6ce4e2d4c6725824fd052c1fe88879cc48be845f4b3ac040b3fc08f1257036eb1bb33cccceeebfd7802e82122d0a404223476e22ce254e86dbcccb5517b39bd24f26054a64bb009d17034ff33ddaf9860892bfb172e8ae214afafb4320382dd6aaf03f8a8f8701010c271a64f4668b316692e09ce38dbf0f057597e4ce44ca5124d58ace51834e0819f42959185326ff48de25e6326fa61c0eddc11de8acba8ffa4ee07504b0708b8501d59b1000000d9000000504b01021400140008080800d4ad282b2bc2bf352a000000280000001400040000000000000000000000000000004d4554412d494e462f4d414e49464553542e4d46feca0000504b01021400140008080800d4ad282be692a3cf7e10000069220000070000000000000000000000000070000000412e636c617373504b01021400140008080800d4ad282b9015bd90fb0400006f0c0000070000000000000000000000000023110000422e636c617373504b01021400140008080800d4ad282b59f4f052d2070000ba150000070000000000000000000000000053160000432e636c617373504b01021400140008080800d4ad282bb8501d59b1000000d900000007000000000000000000000000005a1e0000442e636c617373504b050600000000050005001a010000401f0000000000000000";

describe('send raw transaction of 1.337 aions and no data', () => {
  let opts = { 
      from: "0xa0377903916a82984377554f247d49071fcfe13345f7c22da64e0c0edf18092d",//test_cfg.TEST_ACCT_ADDR,
      gas: test_cfg.GAS,
      gasPrice: test_cfg.GAS_PRICE,
  };

  let typesBin
  let typesAbi
  let ct;
  let ctInstAddress;

  before(done => {
    if( test_cfg.AVM_TEST_CT_2_ADDR.length == 0 ) { 
        done(Error("Error during setup.  No test account address was configured."));
    }
    done();
  })

  

  it('sendRawTransaction', done => { 
    let tx = {
        to: test_cfg.TEST_ACCT_2_ADDR,
        value: 1337000000000000000,  // 0.001337 Aions
        gas: 54321
    }

    let tx2 ={
      value:1,
      data: data,
      gas:test_cfg.GAS_PRICE,
      gasPrice:test_cfg.AVM_TEST_CT_DEPLOY_GAS
    }

    client.eth.getBalance(opts.from).then((bal) => {
        if(bal < tx.value) { 
            done(Error("Account balance too low.  Want to send "+ tx.value +" but only have "+bal));
        }
    });

    //let account = client.eth.accounts.privateKeyToAccount('0x935c250733f2f100d92b7247c50ea4dda8170d311ec61034b433cc5bf946b45eeeaf880df6e5d9fad143940a079b6cc1bb3877b84eb10bdd1fa222ee266941fc');
    let account = client.eth.accounts.privateKeyToAccount(test_cfg.AVM_TEST_PK);
    account.signTransaction(tx, (err, res) => {
      if (err !== null && err !== undefined) {
        done(err);
      }

      console.log("Tx signed.  Sending to kernel.:"+res.rawTransaction);
      client.eth.sendSignedTransaction(res.rawTransaction).on('receipt', (r) => {
        let txHash = r.transactionHash;
        client.eth.getTransaction(txHash, (err, res) => {
          if (err !== null && err !== undefined) {
            done(err);
          }

          client.utils.toHex(res.value).should.eql(tx.value);
          res.from.toLowerCase().should.eql(opts.from.toLowerCase());
          res.to.toLowerCase().should.eql(tx.to.toLowerCase());
          done();
        })
      });
    })

  });

})
